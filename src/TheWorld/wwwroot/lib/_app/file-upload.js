!function(){"use strict";angular.module("app-trips").controller("UploadController",["$scope","FileUploadService",function(e,i){function l(){e.FileDescription="",angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)}),e.f1.$setPristine(),e.IsFormSubmitted=!1}e.Message="",e.FileInvalidMessage="",e.SelectedFileForUpload=null,e.FileDescription="",e.IsFormSubmitted=!1,e.IsFileValid=!1,e.IsFormValid=!1,e.$watch("f1.$valid",function(i){e.IsFormValid=i}),e.ChechFileValid=function(i){var l=!1;null!=e.SelectedFileForUpload?("image/png"==i.type||"image/jpeg"==i.type||"image/gif"==i.type)&&i.size<=524288?(e.FileInvalidMessage="",l=!0):e.FileInvalidMessage="Selected file is Invalid. (only file type png, jpeg and gif and 512 kb size allowed)":e.FileInvalidMessage="Image required!",e.IsFileValid=l},e.selectFileforUpload=function(i){e.SelectedFileForUpload=i[0]},e.SaveFile=function(){e.IsFormSubmitted=!0,e.Message="",e.ChechFileValid(e.SelectedFileForUpload),e.IsFormValid&&e.IsFileValid?i.UploadFile(e.SelectedFileForUpload,e.FileDescription).then(function(e){alert(e.Message),l()},function(e){alert(e)}):e.Message="All the fields are required."}}]).factory("FileUploadService",["$http","$q",function(e,i){var l={};return l.UploadFile=function(l,a){var t=new FormData;t.append("file",l),t.append("description",a);var n=i.defer();return e.post("/Data/SaveFiles",t,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){n.resolve(e)}).error(function(){n.reject("File Upload Failed!")}),n.promise},l}])}();